# Performance log

Log of the performance of this crate.

<!---
## Commit XXXXXXXX (06.04.2024)

Only allocate a single HashSet and collect into it (via HashSet::extend).

### Main binary

```console
$ head $SUDOKU17 | cargo run --quiet --release -- -
```

### iai benchmarks

```
```

### Flamegraph

Generated using `cargo flamegraph --unit-test libsolver -- solver::test::solve_sudoku_iterative_dfs`

![flamegraph generated by cargo-flamegraph](./graphs/_s0-flamegraph.svg "flamegraph")
-->

## Commit c3d700c2 (06.04.2024)

Use a custom Set implementation.

### Main binary

```console
$ head $SUDOKU17 | cargo run --quiet --release -- -
[INFO]: Reading the file took 0.001ms
[INFO]: Parsing the 10 Sudokus took 0.003ms
        that is 0.328us per sudoku
[INFO]: Total time 0.00001621s
[INFO]: Solved 10 sudokus in 4.252s, that is 425.250ms per sudoku
```

### iai benchmarks

```
dfs_iai::solve_sudoku_group::solve_sudoku first:Sudoku :: from_line(SUDOKU)
  Instructions:           256860267|1639834308      (-84.3362%) [-6.38415x]
  L1 Hits:                310481636|2124019826      (-85.3824%) [-6.84105x]
  L2 Hits:                        7|7               (No change)
  RAM Hits:                     165|195             (-15.3846%) [-1.18182x]
  Total read+write:       310481808|2124020028      (-85.3824%) [-6.84105x]
  Estimated Cycles:       310487446|2124026686      (-85.3821%) [-6.84094x]
```

### Flamegraph

Generated using `cargo flamegraph --unit-test libsolver -- solver::test::solve_sudoku_iterative_dfs`

![flamegraph generated by cargo-flamegraph](./graphs/v0.0.5_c3d700c2_s0-flamegraph.svg "flamegraph")

## Commit 04610b63 (06.04.2024)

Only allocate a single HashSet and collect into it (via HashSet::extend).

### Main binary

```console
$ head $SUDOKU17 | cargo run --quiet --release -- -
[INFO]: Reading the file took 0.001ms
[INFO]: Parsing the 10 Sudokus took 0.002ms
        that is 0.247us per sudoku
[INFO]: Total time 0.000014287s
[INFO]: Solved 10 sudokus in 41.130s, that is 4113.005ms per sudoku
```

### iai benchmarks

```
dfs_iai::solve_sudoku_group::solve_sudoku first:Sudoku :: from_line(SUDOKU)
  Instructions:          1639834308|2116917184      (-22.5367%) [-1.29093x]
  L1 Hits:               2124019826|2464735588      (-13.8236%) [-1.16041x]
  L2 Hits:                        7|7               (No change)
  RAM Hits:                     195|184             (+5.97826%) [+1.05978x]
  Total read+write:      2124020028|2464735779      (-13.8236%) [-1.16041x]
  Estimated Cycles:      2124026686|2464742063      (-13.8236%) [-1.16041x]
```

### Flamegraph

Generated using `cargo flamegraph --unit-test libsolver -- solver::test::solve_sudoku_iterative_dfs`

![flamegraph generated by cargo-flamegraph](./graphs/v0.0.5_04610b63_s0-flamegraph.svg "flamegraph")

## Commit 53f8f6cb (06.04.2024)

Only allocate a single HashSet and collect into it (via HashSet::extend).

### Main binary

```console
$ head $SUDOKU17 | cargo run --quiet --release -- -
[INFO]: Reading the file took 0.001ms
[INFO]: Parsing the 10 Sudokus took 0.002ms
        that is 0.219us per sudoku
[INFO]: Total time 0.000013475s
[INFO]: Solved 10 sudokus in 39.482s, that is 3948.221ms per sudoku
```

### iai benchmarks

```
dfs_iai::solve_sudoku_group::solve_sudoku first:Sudoku :: from_line(SUDOKU)
  Instructions:          2116917184|5649147937      (-62.5268%) [-2.66857x]
  L1 Hits:               2464735588|6887022124      (-64.2119%) [-2.79422x]
  L2 Hits:                        7|13              (-46.1538%) [-1.85714x]
  RAM Hits:                     184|216             (-14.8148%) [-1.17391x]
  Total read+write:      2464735779|6887022353      (-64.2119%) [-2.79422x]
  Estimated Cycles:      2464742063|6887029749      (-64.2118%) [-2.79422x]
```

### Flamegraph

Generated using `cargo flamegraph --unit-test libsolver -- solver::test::solve_sudoku_iterative_dfs`

![flamegraph generated by cargo-flamegraph](./graphs/v0.0.5_53f8f6cb_s0-flamegraph.svg "flamegraph")

## Commit fd7a0574 (06.04.2024)

Baseline measurements (starting to measure performance).

### Main binary

```console
$ head $SUDOKU17 | cargo run --quiet --release -- -
[INFO]: Reading the file took 0.001ms
[INFO]: Parsing the 10 Sudokus took 0.002ms
        that is 0.247us per sudoku
[INFO]: Total time 0.000010699s
[INFO]: Solved 10 sudokus in 136.536s, that is 13653.594ms per sudoku
```

### iai benchmarks

```
dfs_iai::solve_sudoku_group::solve_sudoku first:Sudoku :: from_line(SUDOKU)
  Instructions:          5649147937
  L1 Hits:               6887022124
  L2 Hits:                       13
  RAM Hits:                     216
  Total read+write:      6887022353
  Estimated Cycles:      6887029749
```

### Flamegraph

Generated using `cargo flamegraph --unit-test libsolver -- solver::test::solve_sudoku_iterative_dfs`

![flamegraph generated by cargo-flamegraph](./graphs/v0.0.4_s0-flamegraph.svg "flamegraph")
